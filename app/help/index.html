<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        html {
            font-size: 5mm;
        }

        header img {
            height: 1.5rem;
        }

        article img {
            height: 1.5rem;
        }

        body {
            margin: 1rem;
            padding: 1rem;
            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.2);
        }

        table {
            border-collapse: collapse;
            margin-top: 1rem;
            margin-bottom: 1rem;
        }

        table,
        th,
        td {
            border: 1px solid lightgray;
            border-collapse: collapse;
            padding: 0.2rem;
        }
        footer {
            margin-top: 2rem;
            width: fit-content;
            margin-left: auto;
            margin-right: auto;
            border-radius: 0.5rem;
            padding: 0.5rem;
            background-color: rgba(255, 166, 0, 0.205);
        }
    </style>
    <title>SailWatch help</title>
</head>

<body>
    <header>
        <h1>Sailwatch</h1>
        Sailwatch <img src="../img/sailwatch-64.png" alt=""> is a simple tool for executing starts using rule 26 with
        5-4-1-0 intervals and taking finish times.
        It takes the wall clock time as references.
        Moreover, it might not respond as fast as a hardware clock, since it is a web-app - but good enough for club
        races.
        <br>
        Jump to the topics:
        <ul>
            <li><a href="#start">Start</a></li>
            <li><a href="#finish">Finish</a></li>
            <li><a href="#note">Note</a></li>
            <li><a href="#settings">Settings</a></li>
            <li><a href="#app">about the App</a></li>
        </ul>
        <h2>Usage</h2>
        Per default, it displays the registered events from today.
        The "earlier" button at the top allows the loading of previous events.
        All events are stored locally on the mobile device. They can be shared using "share" in the settings.
        The button <img src="../img/table.png" alt="table icon"> turns the separate entries into tables with headers.
    </header>
    <hr>
    <main>
        <article id="start">
            <h1>Start</h1>
            <h2>Registering a start</h2>
            The icon <img src="../img/start.png" alt="start icon"> opens a dialog for registering a start.
            A few Suggestions for start times are shown, starting 330 seconds after now or the latest registered event.
            Similarly, fleets to start can be selected. New fleets can be added using the input field.
            It is possible to schedule starts many hours in advance.
            <h2>Start procedure</h2>
            About 30 seconds before the first signal (rule 26 warning signal), the current starts gets an orange frame
            and displays more information:
            <table>
                <tr>
                    <td>Start at</td>
                    <td><em>wall time of planned start</em></td>
                    <td>fleets</td>
                </tr>
                <tr>
                    <td>start in</td>
                    <td><em>time left to start</em></td>
                    <td>current time</td>
                </tr>
                <tr>
                    <td>flag in</td>
                    <td><b><em>time left to next signal</em></b></td>
                    <td><b><em>which signal</em></b></td>
                </tr>
            </table>

            The following signals are displayed:

            <table>
                <tr>
                    <td>5 min before start</td>
                    <td>Warning signal</td>
                    <td>Class flag up</td>
                    <td>beeps last 5 seconds</td>
                </tr>
                <tr>
                    <td>4 min before start</td>
                    <td>Preparatory signal</td>
                    <td>Flag P up</td>
                    <td>beeps last 5 seconds</td>
                </tr>
                <tr>
                    <td>1 min before start</td>
                    <td>one-minute signal</td>
                    <td>Flag P down</td>
                    <td>beeps last 5 seconds</td>
                </tr>
                <tr>
                    <td>at start</td>
                    <td>Start signal</td>
                    <td>Class flag down</td>
                    <td>beeps last 15 seconds</td>
                </tr>
            </table>

            During the start, the icon <img src="../img/flag_ap.png" alt="flag ap"> is shown below the table.
            Pressing the icon aborts the start and adds a note about it to the content.
            For 30 seconds after the start, the flags <img src="../img/flag_x.png" alt="flag X"> and
            <img src="../img/flag_recall.png" alt="recall flag"> are shown.
            Pressing the flag X adds a note, while pressing the recall flag recalls the start, i.e. adds a note and
            removes the start.

        </article>
        <hr>
        <article id="finish">
            <h1>Finish</h1>
            The icon <img src="../img/finish.png" alt="finish icon"> always hovers at the lower left corner.
            It can be pressed at any time and adds an entry for that finish, showing a table row:
            <table>
                <tr>
                    <td>clock time</td>
                    <td>- sn -</td>
                    <td>-fleet-</td>
                </tr>
            </table>
            Clicking anywhere on that row opens a dialog, where one can enter the sailnumber and also add the fleet.
            That information is used at the end to display the sailed time.
        </article>
        <hr>
        <article id="note">
            <h1>Note</h1>
            Pressing the note icon <img src="../img/note.png" alt="note icon"> adds an empty note.
            One can edit any note and it will be saved after a few seconds of inactivity.
            Moreover, removing the text will remove the note.
        </article>
        <hr>
        <article id="settings">
            <h1>Settings</h1>
            Pressing the icon <img src="../img/sailwatch-64.png" alt="sailwatch icon"> opens the setting dialog.
            On top is the link to this help page.

            <h2>Share and import</h2>
            The 2 fields are buttons and initiate the share/export of the displayed events or the import from file.
            Share creates a datafile from the content and opens the share dialog. 
            Here, the user can send the content to others via bluetooth, email, social apps or similar.
            Import loads the content of a datafile into the app.

            <h2>Notifications</h2>
            Notifications should have the value "granted". 
            If it says "requesting", but no request is shown, then one needs to go into system settings, apps and permission and then allow notifications.
            Notifications are used to get the app into foreground - a few seconds before each signal.

            <h2>Latest ping</h2>
            This app makes use of a service worker to cache files and also ensures that starts are carried out.
            The value indicates the time when the last message of the service worker was received. It should be quite recent.

            <h2>Version</h2>
            It presents the version of the app - the github commit hash as a hex string. Then the app can work in offline mode.
            Or it shows the text "bypass". 
            In the latter case, all files are retrieved from the network - hence delays might occure.

            <h2>Danger zone</h2>
            <h3>Delete events</h3>
            One can select a date and by tapping the right field, all events before that date are deleted.

            <h2>Other information</h2>
            At the lower end, the origin of the app and user agent are shown.
        </article>
        <hr>
        <article>
            <h1>Browser limitations</h1>
            <ul>
                <li><b>Chrome</b> seems to work well.</li>
                <li>
                    <b>DuckDuckGo</b> focuses on privacy and disallows certain features. 
                </li>
                <li>
                    <b>Firefox</b> has no share functionality, instead the content is downloaded as a json file. 
                    Installing the page as an app is not possible.
                </li>
                <li><b>Samsung Internet</b> does not allow the browser to stay awake - the screen is dimming too early.</li>
            </ul>
        </article>
        <article id="app">
            <h1>About the App</h1>
            I programmed the app as an exercise in Web frontend development.
            It is a progressive web application, which can be installed as an app and caches files to be served when
            offline. Moreover, all registered events like start, notes, finishes are stored locally on the mobile device using IndexedDB.
            It does not work with the DuckDuckGo browser, since it has limited support for the functions I am using.
            <br>
            <a href="https://github.com/matthias-p-nowak/sailwatch">Source code on github</a>
        </article>
    </main>
    <footer>
        <div>
            <a href="../index.html">Back to the app</a>
        </div>
    </footer>
</body>

</html>